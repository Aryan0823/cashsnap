$(function(){$('[data-toggle="tooltip"]').tooltip()});let totalRatingCount=0,ratingSum=0;document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector("#rating-value");fetch("/api/ns/rating/get-rating",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({page_url:window.location.href})}).then(t=>t.json()).then(e=>{totalRatingCount=e.data.ratingData.totalCount,ratingSum=e.data.ratingData.ratingSum;let n=0;0===totalRatingCount?t.innerHTML="Average rating 0 / 5. Vote count: 0":(n=ratingSum/totalRatingCount,t.innerHTML=`Average rating ${n.toFixed(2)} / 5. Vote count: ${totalRatingCount}`);for(let a=.5;a<=n;a+=.5)document.getElementsByClassName(`star${a}`)[0].style.color="#f5a623"}).catch(t=>console.log(t));let e=document.querySelectorAll("input"),n=document.querySelector("#rating-great"),a={page_url:window.location.href,os_details:navigator.userAgent};for(let o=0;o<e.length;o++)e[o].addEventListener("click",function(){if(o=this.value,a.rating=Number(o),a.rating){let e=(ratingSum+parseFloat(a.rating))/(totalRatingCount+1);t.innerHTML=`Average rating ${e.toFixed(2)} / 5. Vote count: ${totalRatingCount+1}`;for(let r=.5;r<=5;r+=.5)document.getElementsByClassName(`star${r}`)[0].style.color="#ddd";for(let i=.5;i<=a.rating;i+=.5)document.getElementsByClassName(`star${i}`)[0].style.color="#f5a623";fetch("/api/ns/rating",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(t=>t.json()).then(t=>{document.getElementsByClassName("brfore-rating-msg")[0].style.display="none"}).catch(t=>{console.log("error",t),document.getElementsByClassName("brfore-rating-msg")[0].style.display="none"}),n.innerHTML="Thank you for rating this post "}})});